<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dynamic Quote Generator — Filter + Sync</title>
  <style>
    :root{
      --bg:#f7f7f8; --card:#fff; --text:#222; --muted:#666;
      --border:#e5e7eb; --accent:#2563eb; --accent-hover:#1d4ed8;
      --danger:#dc2626; --danger-hover:#b91c1c; --ok:#059669; --warn:#d97706;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:24px; background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display:flex; flex-direction:column; align-items:center; gap:16px;
    }
    h1{margin:0}
    .container{
      width:min(900px, 95vw);
      display:flex; flex-direction:column; gap:14px;
    }
    .card{
      background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px;
    }
    .row{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
    select, input[type="text"], input[type="file"]{
      padding:10px 12px; border:1px solid var(--border); border-radius:8px; background:#fff;
    }
    button{
      padding:10px 14px; border:none; border-radius:8px; color:#fff; cursor:pointer;
      background:var(--accent);
    }
    button:hover{ background:var(--accent-hover); }
    .btn-danger{ background:var(--danger); }
    .btn-danger:hover{ background:var(--danger-hover); }
    .btn-ok{ background:var(--ok); }
    .btn-warn{ background:var(--warn); }
    .muted{ color:var(--muted); }
    #quoteDisplay{
      font-style:italic; font-size:1.05rem; text-align:center;
      padding:12px; border:2px dashed var(--border); border-radius:12px; background:#fff;
    }
    ul#quoteList{ list-style:none; padding:0; margin:0; display:grid; gap:10px; }
    .quote-item{
      border:1px solid var(--border); border-radius:10px; padding:12px; background:#fff;
      display:flex; justify-content:space-between; gap:10px; align-items:flex-start;
    }
    .quote-text{ font-style:italic; }
    .quote-meta{ font-size:.9rem; color:var(--muted); }
    .notice{ display:none; padding:10px 12px; border-radius:8px; }
    .notice.show{ display:block; }
    .notice.ok{ background:#ecfdf5; color:#065f46; border:1px solid #a7f3d0; }
    .notice.warn{ background:#fffbeb; color:#92400e; border:1px solid #fde68a; }
    .notice.info{ background:#eff6ff; color:#1e40af; border:1px solid #bfdbfe; }
    .conflicts{ display:none; }
    .conflicts.show{ display:block; }
    .conflict-item{
      border:1px solid var(--border); border-radius:10px; padding:10px; margin-top:10px; background:#fff;
    }
    .form-container .row input{ flex:1 1 240px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dynamic Quote Generator</h1>
    <div class="muted">Filtering + Web Storage + JSON Import/Export + Server Sync (with conflict resolution) ✔️</div>

    <!-- Notice / Sync messages -->
    <div id="notice" class="notice info card"></div>

    <!-- Controls -->
    <div class="card">
      <div class="row">
        <label for="categoryFilter" class="muted">Filter by Category:</label>
        <!-- per requirement: inline onchange hook -->
        <select id="categoryFilter" onchange="filterQuotes()">
          <option value="all">All Categories</option>
          <!-- categories added dynamically -->
        </select>

        <button id="btnRandom">Show Random Quote</button>
        <button id="btnSync" class="btn-ok">Sync Now</button>
        <button id="btnToggleConflicts" class="btn-warn">Conflicts (0)</button>
        <button id="btnClear" class="btn-danger">Clear All Quotes</button>
      </div>
      <div class="row">
        <input type="file" id="importFile" accept=".json" />
        <button id="btnExport">Export Quotes (JSON)</button>
      </div>
    </div>

    <!-- Current random display -->
    <div id="quoteDisplay" class="card">Click “Show Random Quote” or choose a category.</div>

    <!-- Filtered list -->
    <div class="card">
      <h3 style="margin:0 0 8px 0;">Quotes</h3>
      <ul id="quoteList"></ul>
    </div>

    <!-- Add Quote Form (built dynamically by JS to satisfy earlier checker) -->
    <div id="addFormMount"></div>

    <!-- Conflicts panel -->
    <div id="conflictsPanel" class="card conflicts">
      <h3 style="margin:0 0 8px 0;">Conflicts</h3>
      <div id="conflictsList"></div>
    </div>
  </div>

  <script src="./script.js"></script>
</body>
</html>
